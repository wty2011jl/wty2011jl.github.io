{% include base_path %}

{% if page.author_profile or layout.author_profile or page.sidebar %}
  <div class="sidebar sticky">

    {%- if page.author_profile or layout.author_profile -%}
      {% include author-profile.html %}
      
      <!-- ✅ 插入访客地图 -->
      <div class="author__map" style="margin-top: 10px; text-align: center;">
        <h4 style="font-size: 90%; margin-bottom: 5px;">Visitor Map</h4>
        <script type="text/javascript" id="clstr_globe"
                src="//clustrmaps.com/globe.js?d=l9DONxl5dILJUF_b3Tz43RVwJJIOdvp4xAuZ2FUbDnU">
        </script>
      </div>
    {%- endif -%}

    {% if page.sidebar %}
      {% for s in page.sidebar %}
        {% if s.image %}
          <img src=
          {% if s.image contains "://" %}
            "{{ s.image }}"
          {% else %}
            "{{ s.image | prepend: "/images/" | prepend: base_path }}"
          {% endif %}
          alt="{% if s.image_alt %}{{ s.image_alt }}{% endif %}">
        {% endif %}
        {% if s.title %}<h3>{{ s.title }}</h3>{% endif %}
        {% if s.text %}{{ s.text | markdownify }}{% endif %}
      {% endfor %}
      {% if page.sidebar.nav %}
        {% include nav_list nav=page.sidebar.nav %}
      {% endif %}
    {% endif %}
    
  </div>
{% endif %}
